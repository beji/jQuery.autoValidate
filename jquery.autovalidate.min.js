/*
 * Simple_ajax_templates.js
 * https://github.com/beji/jQuery.autoValidate
 *
 * Requires jQuery
 * http://jquery.com/
 *
 * Copyright 2013 Bjoern Erlwein
 * Released under the MIT license
 *
 */
(function(b){var a=function(l){var j={};var g=function(n,m,o){j[n]={type:m,error:o}};var h=function(n){var m=n.attr("name");if(!(b("input:radio[name='"+m+"']").is(":checked"))){g(m,"radio","unchecked");return false}return true};var i=function(m){if(m.val().trim()===""){g(m.attr("name"),"input_string","empty");return false}return true};var c=function(n){var m=/^[_a-zA-Z0-9-]+(\.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*(\.([a-zA-Z]){2,4})$/;if(n.val().trim()===""&&!n.hasClass("optional")){g(n.attr("name"),"input_email","empty");return false}if(!m.exec(n.val())&&n.val().trim()!==""){g(n.attr("name"),"input_email","invalid");return false}return true};var e=function(n){var m=/@epost.de$/;c(n);if(m.exec(n.val().toLowerCase())){g(n.attr("name"),"input_email","epost");return false}return true};var k=function(m){if(!(m.is(":checked"))){g(m.attr("name"),"checkbox","unchecked");return false}return true};var f=function(m){if(item.val().trim()===""&&!item.hasClass("optional")){g(item.attr("name"),"input_number","empty");return false}if(isNaN(item.val())&&item.val().trim()!==""){g(item.attr("name"),"input_number","not a number");return false}return true};var d=function(m){m.children().each(function(o,p){p=b(p);if(p.children().length>0){d(p)}var n=p.attr("data-validation");if(n!==undefined){if(n==="radio"){h(p)}if(n==="string"){i(p)}if(n==="email"){c(p)}if(n==="epost"){e(p)}if(n==="checkbox"){k(p)}if(n==="number"){f(p)}}})};d(l);return j};b.fn.autoValidate=function(d){var d=b.extend({validationMessageAttribute:"data-validation",defaultValidationMessageType:"container",validationMessageContainerClass:"validationMessages",validationCallbackAttribute:"data-validation-callback",defaultCallbackFunction:"submit",callback:null,addErrorClass:true,generalErrorMessage:"Please correct your input"},d||{});var c=function(){var o=b(this);if(o.hasClass("noErrorClass")){d.addErrorClass=false}var k=a(o);var e=o.attr(d.validationMessageAttribute)||d.defaultValidationMessageType;var f=o.find("."+d.validationMessageContainerClass);if(d.addErrorClass){b(".validateForm .error, .autoValidate .error").removeClass("error")}if(e==="container"){if(f.length!==0){f.hide()}o.find(".customErrorContainer").hide()}var p=false;var j=d.generalErrorMessage;if(!b.isEmptyObject(k)){for(var n in k){if(k.hasOwnProperty(n)){if(d.addErrorClass){var m=b("[name='"+n+"']");m.addClass("error");b("label[for='"+m.attr("id")+"']").addClass("error")}if(e==="container"){var i=k[n].error;if(o.find(".customErrorContainer[data-for='"+n+"'][data-errortype='"+i+"']").length>0){o.find(".customErrorContainer[data-for='"+n+"'][data-errortype='"+i+"']").show()}else{if(o.find(".customErrorContainer[data-for='"+n+"']").not("[data-errortype]").length>0){o.find(".customErrorContainer[data-for='"+n+"']").not("[data-errortype]").show()}}}else{if(e==="alert"){var i=k[n].error;if(o.find(".customErrorContainer[data-for='"+n+"'][data-errortype='"+i+"']").length>0){j=o.find(".customErrorContainer[data-for='"+n+"'][data-errortype='"+i+"']").text()}else{if(o.find(".customErrorContainer[data-for='"+n+"']").not("[data-errortype]").length>0){j=o.find(".customErrorContainer[data-for='"+n+"']").not("[data-errortype]").text()}}if(j!==d.generalErrorMessage){break}}}}}if(e==="alert"){alert(j)}else{if(e==="container"){if(f.length===0){f.text(d.generalErrorMessage)}f.show()}}return false}else{var h=o.attr(d.validationCallbackAttribute)||d.defaultCallbackFunction;var g=d.callback||window[h];if(typeof g==="function"){var l=g();return(typeof l!=="undefined")?l:true}else{return true}}};this.unbind("submit");this.bind("submit",c);return this};window.validateForm=a})(jQuery);
